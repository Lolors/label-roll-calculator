<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>라벨 개수 계산기</title>
<style>
  :root {
    --bg:#f9fafb; --card:#fff; --ink:#111827; --muted:#6b7280;
    --okbg:#ecfdf5; --okbd:#34d399;
    --warnbg:#fef2f2; --warnbd:#f87171;
    --bd:#e5e7eb; --btn:#111827;
  }
  body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
         background: var(--bg); color: var(--ink); margin: 0; padding: 20px; }
  .wrap { max-width: 640px; margin: 0 auto; }
  h1 { font-size: 1.4rem; margin-bottom: 6px; }
  .sub { color: var(--muted); font-size: 0.9rem; margin-bottom: 16px; }
  .card { background: var(--card); border: 1px solid var(--bd);
          border-radius: 14px; padding: 16px; margin-bottom: 14px;
          box-shadow: 0 4px 10px rgba(0,0,0,0.04); }
  label { display:block; font-size:0.9rem; font-weight:600; margin-bottom:4px; }
  input { width:100%; padding:10px 12px; border:1px solid #d1d5db;
          border-radius:8px; font-size:1rem; }
  .row { display:flex; gap:12px; flex-wrap:wrap; }
  .col { flex:1 1 140px; }
  .result { margin-top:10px; padding:12px; border-radius:10px;
            background:var(--okbg); border:1px solid var(--okbd);
            font-weight:800; font-size:1.1rem; display:none; }
  .warn { margin-top:10px; padding:10px; border-radius:10px;
          background:var(--warnbg); border:1px solid var(--warnbd);
          color:#b91c1c; font-size:0.95rem; display:none; }
  details { margin-top:10px; font-size:0.9rem; color:var(--muted); }
  .footer { text-align:center; margin-top:20px; font-size:0.8rem; color:var(--muted); }
  .spacer { height:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h1>라벨 개수 계산기</h1>
  <div class="sub">단위는 <b>cm</b>이며, 동일 재질/두께일 때 라벨 개수는 <b>부피에 비례</b>한다고 가정합니다.</div>

  <div class="card">
    <!-- 1행: 완롤 바깥지름, 속지름 -->
    <div class="row">
      <div class="col">
        <label>완롤 바깥지름 (cm)</label>
        <input id="a1" type="text" inputmode="decimal" placeholder="예: 27.7">
      </div>
      <div class="col">
        <label>속지름 (cm)</label>
        <input id="b" type="text" inputmode="decimal" placeholder="예: 8.5">
      </div>
    </div>

    <!-- 2행: 높이, 완롤 라벨 개수 -->
    <div class="row">
      <div class="col">
        <label>높이 (cm)</label>
        <input id="h" type="text" inputmode="decimal" placeholder="예: 8.3">
      </div>
      <div class="col">
        <label>완롤 라벨 개수 (개)</label>
        <input id="n1" type="text" inputmode="numeric" placeholder="예: 1000">
      </div>
    </div>

    <!-- 한 줄 띄우고 비교롤 바깥지름 -->
    <div class="spacer"></div>
    <div class="row">
      <div class="col">
        <label>비교롤 바깥지름 (cm)</label>
        <input id="a2" type="text" inputmode="decimal" placeholder="예: 26.5">
      </div>
    </div>

    <div id="warn" class="warn"></div>
    <div id="out" class="result"></div>
    <details id="detail" style="display:none">
      <summary>계산 과정 확인하기</summary>
      <div id="detailText"></div>
    </details>
    <div class="sub">숫자를 입력하시면 자동으로 계산됩니다.</div>
  </div>

  <div class="footer">© 라벨 개수 계산기 · 단일 HTML 파일</div>
</div>

<script>
function parseNum(v){
  if(typeof v !== 'string') return NaN;
  v = v.trim().replace(/,/g,'.').replace(/[^0-9.\\-]/g,'');
  return parseFloat(v);
}
function round1(x){ return Math.round(x*10)/10; }

function calc(){
  const warn = document.getElementById('warn');
  const out = document.getElementById('out');
  const detail = document.getElementById('detail');
  const detailText = document.getElementById('detailText');

  warn.style.display='none'; out.style.display='none'; detail.style.display='none'; warn.textContent='';

  const a1 = parseNum(document.getElementById('a1').value);
  const a2 = parseNum(document.getElementById('a2').value);
  const b  = parseNum(document.getElementById('b').value);
  const h  = parseNum(document.getElementById('h').value);
  const n1 = parseNum(document.getElementById('n1').value);

  // 모두 채우기 전에는 조용히 대기
  if ([a1,a2,b,h,n1].some(x => isNaN(x))) return;

  if (a1 <= b){
    warn.textContent = '완롤 바깥지름은 속지름보다 커야 합니다.';
    warn.style.display='block'; return;
  }
  if (a2 <= b){
    warn.textContent = '비교롤 바깥지름은 속지름보다 커야 합니다.';
    warn.style.display='block'; return;
  }
  if (h <= 0 || n1 <= 0){
    warn.textContent = '높이와 완롤 라벨 개수는 0보다 커야 합니다.';
    warn.style.display='block'; return;
  }

  // 높이는 동일 가정 → (h/h)=1, 하지만 입력 검증을 위해 h는 받습니다.
  const num = (a2*a2 - b*b);
  const den = (a1*a1 - b*b);
  const ratio = num / den;
  const n2 = n1 * ratio;

  out.textContent = `비교롤 라벨 개수 ≈ ${Math.round(n2).toLocaleString()}개 (소수 포함: ${round1(n2).toFixed(1)}개)`;
  out.style.display='block';
  detail.style.display='block';
  detailText.innerHTML =
    `비율 = (비교롤 바깥지름² − 속지름²) / (완롤 바깥지름² − 속지름²) = ${(num/den).toFixed(4)}<br>` +
    `N₂ = N₁ × 비율 = ${n1.toLocaleString()} × ${(num/den).toFixed(4)} = ${n2.toFixed(1)}개`;
}

// 자동 계산
['a1','a2','b','h','n1'].forEach(id => {
  const el = document.getElementById(id);
  el.addEventListener('input', calc, {passive:true});
});
</script>
</body>
</html>
